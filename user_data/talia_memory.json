def load_memory():
    if os.path.exists(MEMORY_PATH):
        try:
            with open(MEMORY_PATH, "r") as f:
                return json.load(f)
        except json.JSONDecodeError:
            print("Warning: Memory file is corrupted or empty. Resetting memory.")
    return {
        "messages": [
            {
                "role": "system",
                "content": "You are Moxie, a caring, intelligent AI tutor guiding Talia through COMP prep. Adapt your responses based on her past sessions and preferences. Today's topic: General Principles."
            }
        ],
        "topics": {},
        "score": 0,
        "attempts": 0,
        "use_comp_mimic": True,
        "setup_complete": False,
        "flashcards_seen": {},
        "comp_date": "",
        "schedule_mode": "schedule",
        "study_style": "",
        "focus_type": "",
        "difficulty": "",
        "goals": "",
        "learning_style": "",
        "custom_topic": "",
        "last_topic": "General Principles",
        "chatbot_name": "Moxie"
    }